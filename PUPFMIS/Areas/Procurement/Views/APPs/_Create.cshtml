@model List<PUPFMIS.Models.ApprovedItems>

<div class="row">
    <div class="col-sm-12">
        <table class="table table-striped table-hover" id="example2">
            <thead>
                <tr>
                    <th style="text-align:center; vertical-align:middle;" width="40%">Item and Specifications</th>
                    <th style="text-align:center; vertical-align:middle;" width="25%">Estimated Budget/Fund Source</th>
                    <th style="text-align:center; vertical-align:middle;" width="35%">Mode of Procurement/Remarks</th>
                </tr>
            </thead>
            <tbody>
                @for (int item = 0; item < Model.Count; item++)
                {
                    <tr>
                        <td style="text-align:left; vertical-align:top;">
                            @Html.HiddenFor(d => Model[item].IsTangible)
                            @Html.HiddenFor(d => Model[item].IsInstitutional)
                            @Html.HiddenFor(d => Model[item].Month)
                            @Html.HiddenFor(d => Model[item].InventoryCode)
                            @Html.HiddenFor(d => Model[item].MOOE)
                            @Html.HiddenFor(d => Model[item].CapitalOutlay)
                            @Html.HiddenFor(d => Model[item].ItemCode)
                            @Html.HiddenFor(d => Model[item].ItemName)
                            <b>@Html.DisplayFor(d => Model[item].ItemName)</b> @if (!Model[item].ItemCode.Contains("CUOS"))
                            { <span>(</span>@Html.DisplayFor(d => Model[item].ItemCode) <span>)</span> }
                            <br /><br />
                            @Html.HiddenFor(d => Model[item].EndUser)
                            @Html.HiddenFor(d => Model[item].EndUser)
                            <b>End-User: </b>@Html.DisplayFor(d => Model[item].EndUser)
                            <br />
                            @Html.HiddenFor(d => Model[item].UACS)
                            @Html.HiddenFor(d => Model[item].ObjectClassification)
                            <b>UACS: </b>@Html.DisplayFor(d => Model[item].UACS)
                            <br />
                            <b>Object Classification: </b>@Html.DisplayFor(d => Model[item].ObjectClassification)
                        </td>
                        <td style="text-align:left; vertical-align:top;">
                            @Html.HiddenFor(d => Model[item].EstimatedBudget)
                            @Html.HiddenFor(d => Model[item].FundSource)
                            @Html.HiddenFor(d => Model[item].FundDescription)
                            <div class="row">
                                <div class="col-sm-5">
                                    <b>MOOE:</b>
                                </div>
                                <div class="col-sm-7" style="text-align:right;">
                                    @( Model[item].MOOE.ToString("C", new System.Globalization.CultureInfo("en-ph")) )
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-5">
                                    <b>CO:</b>
                                </div>
                                <div class="col-sm-7" style="text-align:right;">
                                    @( Model[item].CapitalOutlay.ToString("C", new System.Globalization.CultureInfo("en-ph")) )
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-6">
                                    <b style="font-size:98%">Estimated Budget:</b>
                                </div>
                                <div class="col-sm-6" style="text-align:right;">
                                    @( Model[item].EstimatedBudget.ToString("C", new System.Globalization.CultureInfo("en-ph")) )
                                </div>
                            </div>
                            <hr />
                            <div class="row">
                                <div class="col-sm-5">
                                    <b>Fund Source:</b>
                                </div>
                                <div class="col-sm-7" style="text-align:left;">
                                    @Html.DisplayFor(d => Model[item].FundDescription)
                                </div>
                            </div>
                        </td>
                        <td style="text-align:left; vertical-align:top;">
                            <div class="form-group">
                                @{ 
                                    var modes = new SelectList(ViewBag.ModesOfProcurement, "ID", "ModeOfProcurementName").ToList();
                                    if (Model[item].ModeOfProcurement != null)
                                    {
                                        var selected = new SelectList(ViewBag.ModesOfProcurement, "ID", "ModeOfProcurementName").ToList();
                                        foreach (var mode in Model[item].ModeOfProcurement)
                                        {
                                            selected.Where(d => d.Value == mode).FirstOrDefault().Selected = true;
                                        }
                                        modes = selected;
                                    }
                                }
                                @Html.DropDownListFor(d => Model[item].ModeOfProcurement, modes as List<SelectListItem>, htmlAttributes: new { @class = "form-control form-control-sm select2", style = "font-size:90%;", multiple = "multiple" })
                                @Html.ValidationMessageFor(model => Model[item].ModeOfProcurement, "", new { @class = "text-danger" })
                            </div>
                            <div class="form-group">
                                @Html.LabelFor(d => Model[item].Remarks, htmlAttributes: new { @class = "control-label" })
                                @Html.TextAreaFor(d => Model[item].Remarks, htmlAttributes: new { @class = "form-control form-control-sm", style = "font-size: 90%; resize:none; overflow:auto; text-align: justify;", rows = "5", placeholer = "Remarks" })
                            </div>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<script type="text/javascript">
    $(function () {
        //Initialize Select2 Elements
        $('.select2').select2({
            theme: 'bootstrap4'
        })

        //Initialize Select2 Elements
        $('.select2bs4').select2({
            theme: 'bootstrap4'
        })
    })
</script>