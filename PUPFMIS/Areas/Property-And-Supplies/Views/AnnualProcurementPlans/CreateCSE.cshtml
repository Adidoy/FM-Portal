@model PUPFMIS.Models.AnnualProcurementPlanCSEVM

@{
    ViewBag.Title = "Annual Procurement Plan";
    ViewBag.Description = "CSE";
    Layout = "~/Views/Shared/_BodyLayout.cshtml";
}

@section BreadCrumb {
    <ol class="breadcrumb float-sm-right">
        <li class="breadcrumb-item"><a href="/"><i class="fa fa-dashboard"></i>@Html.ActionLink("PUP-FM Portal", "index", "Home")</a></li>
        <li class="breadcrumb-item">@Html.ActionLink("Dashboard", "dashboard", "AnnualProcurementPlans", new { area = "property-and-supplies" }, null)</li>
        <li class="breadcrumb-item">Create APP-CSE</li>
    </ol>
}

@section Header {
    <div class="col-md-12 text-right">
        <h1 class="card-title"><i class="fa fa-bookmark"></i> New Annual Procurement Plan (Common-use Supplies and Equipment)</h1>
    </div>
}

@using (Html.BeginForm("post-app-cse", "AnnualProcurementPlans", new { Area = "property-and-supplies" }, FormMethod.Post))
{
    @Html.AntiForgeryToken()
    <div class="row">
        <div class="col-sm-12">
            <div class="row">
                <div class="col-sm-12">
                    <div class="bg-info">
                        <h6 class="p-2">AGENCY DETAILS</h6>
                    </div>
                </div>
                <div class="col-sm-12">
                    <div class="row">
                        <div class="col-lg-6 col-md-6 col-sm-12">
                            <div class="form-group">
                                @Html.LabelFor(model => model.FiscalYear, htmlAttributes: new { @class = "control-label" })
                                @Html.HiddenFor(model => model.FiscalYear)
                                <div class="input-group mb-3">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text"><i class="fa fa-calendar"></i></span>
                                    </div>
                                    @Html.EditorFor(model => model.FiscalYear, new { htmlAttributes = new { @class = "form-control form-control-sm", style = "font-size: 100%", disabled = "disabled" } })
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6 col-sm-12">
                            <div class="form-group">
                                @Html.LabelFor(model => model.AccountCode, htmlAttributes: new { @class = "control-label" })
                                @Html.HiddenFor(model => model.AccountCode)
                                <div class="input-group mb-3">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text"><i class="fa fa-id-card"></i></span>
                                    </div>
                                    @Html.EditorFor(model => model.AccountCode, new { htmlAttributes = new { @class = "form-control form-control-sm", style = "font-size: 100%", disabled = "disabled" } })
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-6 col-md-6 col-sm-12">
                            <div class="form-group">
                                @Html.LabelFor(model => model.AgencyName, htmlAttributes: new { @class = "control-label" })
                                @Html.HiddenFor(model => model.AgencyName)
                                <div class="input-group mb-3">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text"><i class="fa fa-building"></i></span>
                                    </div>
                                    @Html.EditorFor(model => model.AgencyName, new { htmlAttributes = new { @class = "form-control form-control-sm", style = "font-size: 100%", disabled = "disabled" } })
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6 col-sm-12">
                            <div class="form-group">
                                @Html.LabelFor(model => model.Address, htmlAttributes: new { @class = "control-label" })
                                @Html.HiddenFor(model => model.Address)
                                <div class="input-group mb-3">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text"><i class="fa fa-building"></i></span>
                                    </div>
                                    @Html.EditorFor(model => model.Address, new { htmlAttributes = new { @class = "form-control form-control-sm", style = "font-size: 100%", disabled = "disabled" } })
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-6 col-md-6 col-sm-12">
                            <div class="form-group">
                                @Html.Label("Head of Procuring Entity (HOPE)", htmlAttributes: new { @class = "control-label" })
                                @Html.HiddenFor(model => model.ApprovedBy)
                                <div class="input-group mb-3">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text"><i class="fa fa-user-alt"></i></span>
                                    </div>
                                    @Html.EditorFor(model => model.ApprovedBy, new { htmlAttributes = new { @class = "form-control form-control-sm", style = "font-size: 100%", disabled = "disabled" } })
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6 col-sm-12">
                            <div class="form-group">
                                @Html.LabelFor(model => model.OrganizationType, htmlAttributes: new { @class = "control-label" })
                                @Html.HiddenFor(model => model.OrganizationType)
                                <div class="input-group mb-3">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text"><i class="fa fa-users"></i></span>
                                    </div>
                                    @Html.EditorFor(model => model.OrganizationType, new { htmlAttributes = new { @class = "form-control form-control-sm", style = "font-size: 100%", disabled = "disabled" } })
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-6 col-md-6 col-sm-12">
                            <div class="form-group">
                                @Html.Label("Accountant / Local Budget Officer", htmlAttributes: new { @class = "control-label" })
                                @Html.HiddenFor(model => model.CertifiedBy)
                                <div class="input-group mb-3">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text"><i class="fa fa-user"></i></span>
                                    </div>
                                    @Html.EditorFor(model => model.CertifiedBy, new { htmlAttributes = new { @class = "form-control form-control-sm", style = "font-size: 100%", disabled = "disabled" } })
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6 col-sm-12">
                            <div class="form-group">
                                @Html.Label("Supply Officer", htmlAttributes: new { @class = "control-label" })
                                @Html.HiddenFor(model => model.PreparedBy)
                                <div class="input-group mb-3">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text"><i class="fa fa-user"></i></span>
                                    </div>
                                    @Html.EditorFor(model => model.PreparedBy, new { htmlAttributes = new { @class = "form-control form-control-sm", style = "font-size: 100%", disabled = "disabled" } })
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-6 col-md-6 col-sm-12">
                            <div class="form-group">
                                @Html.Label("Procurement Officer", htmlAttributes: new { @class = "control-label" })
                                @Html.HiddenFor(model => model.ProcurementOfficer)
                                <div class="input-group mb-3">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text"><i class="fa fa-user"></i></span>
                                    </div>
                                    @Html.EditorFor(model => model.ProcurementOfficer, new { htmlAttributes = new { @class = "form-control form-control-sm", style = "font-size: 100%", disabled = "disabled" } })
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6 col-sm-12">
                            <div class="form-group">
                                @Html.Label("Bids and Awards Committee", htmlAttributes: new { @class = "control-label" })
                                @Html.HiddenFor(model => model.BACSecretariat)
                                <div class="input-group mb-3">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text"><i class="fa fa-user"></i></span>
                                    </div>
                                    @Html.EditorFor(model => model.BACSecretariat, new { htmlAttributes = new { @class = "form-control form-control-sm", style = "font-size: 100%", disabled = "disabled" } })
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <br /><hr /><br />
    <div class="row">
        <div class="col-sm-12">
            <div class="row">
                <div class="col-sm-12">
                    <div class="bg-info">
                        <h6 class="p-2">PART I. AVAILABLE AT PROCUREMENT SERVICE STORES</h6>
                    </div>
                </div>
                <div class="col-sm-12">
                    <div class="card-body table-responsive p-sm-0">
                        <table class="table table-striped table-hover" id="DBMitems">
                            <thead>
                                <tr>
                                    <th style="text-align:center; vertical-align:middle">
                                        @Html.DisplayNameFor(model => model.APPDBMItems.First().ItemSpecifications)
                                    </th>
                                    <th style="text-align:center; vertical-align:middle">
                                        @Html.DisplayNameFor(model => model.APPDBMItems.First().UnitOfMeasure)
                                    </th>
                                    <th style="text-align:center; vertical-align:middle">
                                        Q1
                                    </th>
                                    <th style="text-align:center; vertical-align:middle">
                                        Q2
                                    </th>
                                    <th style="text-align:center; vertical-align:middle">
                                        Q3
                                    </th>
                                    <th style="text-align:center; vertical-align:middle">
                                        Q4
                                    </th>
                                    <th style="text-align:center; vertical-align:middle">
                                        Total Quantity<br />for the Year
                                    </th>
                                    <th style="text-align:center; vertical-align:middle">
                                        Price<br />Catalogue
                                    </th>
                                    <th style="text-align:center; vertical-align:middle">
                                        Total Amount<br />for the Year
                                    </th>
                                </tr>
                            </thead>
                            <tbody>

                                @for (var item = 0; item < Model.APPDBMItems.Count; item++)
                                {
                                    <tr>
                                        @Html.HiddenFor(modelItem => Model.APPDBMItems[item].ItemID)
                                        @Html.HiddenFor(modelItem => Model.APPDBMItems[item].ItemSpecifications)
                                        @Html.HiddenFor(modelItem => Model.APPDBMItems[item].UnitOfMeasure)
                                        @Html.HiddenFor(modelItem => Model.APPDBMItems[item].JanQty)
                                        @Html.HiddenFor(modelItem => Model.APPDBMItems[item].FebQty)
                                        @Html.HiddenFor(modelItem => Model.APPDBMItems[item].MarQty)
                                        @Html.HiddenFor(modelItem => Model.APPDBMItems[item].AprQty)
                                        @Html.HiddenFor(modelItem => Model.APPDBMItems[item].MayQty)
                                        @Html.HiddenFor(modelItem => Model.APPDBMItems[item].JunQty)
                                        @Html.HiddenFor(modelItem => Model.APPDBMItems[item].JulQty)
                                        @Html.HiddenFor(modelItem => Model.APPDBMItems[item].AugQty)
                                        @Html.HiddenFor(modelItem => Model.APPDBMItems[item].SepQty)
                                        @Html.HiddenFor(modelItem => Model.APPDBMItems[item].OctQty)
                                        @Html.HiddenFor(modelItem => Model.APPDBMItems[item].NovQty)
                                        @Html.HiddenFor(modelItem => Model.APPDBMItems[item].DecQty)
                                        @Html.HiddenFor(modelItem => Model.APPDBMItems[item].PriceCatalogue)
                                        <td align="justify">
                                            <b>@Html.DisplayFor(modelItem => Model.APPDBMItems[item].ItemSpecifications)</b>
                                        </td>
                                        <td align="center">
                                            @Html.DisplayFor(modelItem => Model.APPDBMItems[item].UnitOfMeasure)
                                        </td>
                                        <td align="center">
                                            @Html.DisplayFor(d => Model.APPDBMItems[item].Q1Total)
                                        </td>
                                        <td align="center">
                                            @Html.DisplayFor(d => Model.APPDBMItems[item].Q2Total)
                                        </td>
                                        <td align="center">
                                            @Html.DisplayFor(d => Model.APPDBMItems[item].Q3Total)
                                        </td>
                                        <td align="center">
                                            @Html.DisplayFor(d => Model.APPDBMItems[item].Q4Total)
                                        </td>
                                        <td align="center">
                                            @Html.DisplayFor(d => Model.APPDBMItems[item].TotalQty)
                                        </td>
                                        <td align="right">
                                            @( Model.APPDBMItems[item].PriceCatalogue.ToString("C", new System.Globalization.CultureInfo("en-ph")) )
                                        </td>
                                        <td align="right">
                                            @( Model.APPDBMItems[item].TotalAmount.ToString("C", new System.Globalization.CultureInfo("en-ph")) )
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <br /><hr /><br />
    <div class="row">
        <div class="col-sm-12">
            <div class="row">
                <div class="col-sm-12">
                    <div class="bg-info">
                        <h6 class="p-2">PART II. OTHER ITEMS NOT AVAILABLE AT PS BUT REGULARLY PURCHASED FROM OTHER SOURCES</h6>
                    </div>
                </div>
                <div class="col-sm-12">
                    <div class="card-body table-responsive p-sm-0">
                        <table class="table table-striped table-hover" id="NonDBMitems">
                            <thead>
                                <tr>
                                    <th style="text-align:center; vertical-align:middle">
                                        @Html.DisplayNameFor(model => model.APPNonDBMItems.First().ItemSpecifications)
                                    </th>
                                    <th style="text-align:center; vertical-align:middle">
                                        @Html.DisplayNameFor(model => model.APPNonDBMItems.First().UnitOfMeasure)
                                    </th>
                                    <th style="text-align:center; vertical-align:middle">
                                        Q1
                                    </th>
                                    <th style="text-align:center; vertical-align:middle">
                                        Q2
                                    </th>
                                    <th style="text-align:center; vertical-align:middle">
                                        Q3
                                    </th>
                                    <th style="text-align:center; vertical-align:middle">
                                        Q4
                                    </th>
                                    <th style="text-align:center; vertical-align:middle">
                                        Total Quantity<br />for the Year
                                    </th>
                                    <th style="text-align:center; vertical-align:middle">
                                        Price<br />Catalogue
                                    </th>
                                    <th style="text-align:center; vertical-align:middle">
                                        Total Amount<br />for the Year
                                    </th>
                                </tr>
                            </thead>
                            <tbody>

                                @for (var item = 0; item < Model.APPNonDBMItems.Count; item++)
                                {
                                    <tr>
                                        <td align="justify">
                                            @Html.HiddenFor(modelItem => Model.APPNonDBMItems[item].ItemID)
                                            @Html.HiddenFor(modelItem => Model.APPNonDBMItems[item].ItemSpecifications)
                                            <b>@Html.DisplayFor(modelItem => Model.APPNonDBMItems[item].ItemSpecifications)</b>
                                        </td>
                                        <td align="center">
                                            @Html.HiddenFor(modelItem => Model.APPNonDBMItems[item].UnitOfMeasure)
                                            @Html.DisplayFor(modelItem => Model.APPNonDBMItems[item].UnitOfMeasure)
                                        </td>
                                        <td align="center">
                                            @Html.DisplayFor(d => Model.APPNonDBMItems[item].Q1Total)
                                        </td>
                                        <td align="center">
                                            @Html.DisplayFor(d => Model.APPNonDBMItems[item].Q2Total)
                                        </td>
                                        <td align="center">
                                            @Html.DisplayFor(d => Model.APPNonDBMItems[item].Q3Total)
                                        </td>
                                        <td align="center">
                                            @Html.DisplayFor(d => Model.APPNonDBMItems[item].Q4Total)
                                        </td>
                                        <td align="center">
                                            @Html.DisplayFor(d => Model.APPNonDBMItems[item].TotalQty)
                                        </td>
                                        <td align="right">
                                            @( Model.APPNonDBMItems[item].PriceCatalogue.ToString("C", new System.Globalization.CultureInfo("en-ph")) )
                                        </td>
                                        <td align="right">
                                            @( Model.APPNonDBMItems[item].TotalAmount.ToString("C", new System.Globalization.CultureInfo("en-ph"))  )
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <br /><br />
    <div class="card-footer">
        <div class="float-right">
            <button type="submit" class="btn btn-md btn-primary"><i class="fa fa-save"></i> Post APP-CSE</button>
            @if (User.IsInRole(PUPFMIS.Models.SystemRoles.PropertyDirector) || User.IsInRole(PUPFMIS.Models.SystemRoles.SuppliesChief))
            {
                <button type="button" class="btn btn-md btn-danger" onclick="window.location = '@Url.Action("dashboard", "APPCSEDashboard", new { Area = "property-and-supplies" })'"><i class="fa fa-arrow-circle-left"></i> Back to Dashboard</button>
            }
            else if (User.IsInRole(PUPFMIS.Models.SystemRoles.ProcurementAdministrator) || User.IsInRole(PUPFMIS.Models.SystemRoles.ProcurementPlanningChief))
            {
                <button type="button" class="btn btn-md btn-danger" onclick="window.location = '@Url.Action("dashboard", "AnnualProcurementPlans", new { Area = "procurement" })'"><i class="fa fa-arrow-circle-left"></i> Back to Dashboard</button>
            }
            else
            {
                <button type="button" class="btn btn-md btn-danger" onclick="window.location = '@Url.Action("dashboard", "AnnualProcurementPlans", new { Area = "procurement" })'"><i class="fa fa-arrow-circle-left"></i> Back to Dashboard</button>
            }
        </div>
    </div>
}

<script src="~/Scripts/adminlte/components/jquery/dist/jquery.min.js"></script>
<script type="text/javascript">
    $(function () {
        $('#DBMitems').DataTable({
            "paging": false,
            "lengthChange": false,
            "searching": false,
            "ordering": false,
            "info": false,
            "autoWidth": false,
        });
    });

    $(function () {
        $('#NonDBMitems').DataTable({
            "paging": false,
            "lengthChange": false,
            "searching": false,
            "ordering": false,
            "info": false,
            "autoWidth": false,
        });
    });
</script>