@model PUPFMIS.Models.InfrastructureDetailedEstimateVM

@{
    ViewBag.Title = "Materials/Labor";
    ViewBag.Description = "Add to Estimate";
    Layout = "~/Views/Shared/_BodyLayout.cshtml";
}

@section BreadCrumb {
    <ol class="breadcrumb float-sm-right">
        <li class="breadcrumb-item"><a href="/"><i class="fa fa-tachometer-alt"></i>&nbsp;@Html.ActionLink("PUP-FM Portal", "index", "Home", new { Area = "" }, null)</a></li>
        <li class="breadcrumb-item">@Html.ActionLink("Materials/Labor Catalogue", "view-catalogue", "MaterialsCatalogue", new { area = "infrastructure-unit" }, null)</li>
        <li class="breadcrumb-item">Add to Estimate</li>
    </ol>
}

@section Header {
    <div class="col-md-12 text-right">
        <h1 class="card-title"><i class="fa fa-bookmark"></i> Add Material/Labor to Estimate</h1>
    </div>
}

@using (Html.BeginForm("add-material", "MaterialsCatalogue", new { Area = "infrastructure-unit" }, FormMethod.Post, htmlAttributes: new { id = "basket" }))
{
    @Html.AntiForgeryToken()
    if (!Html.ViewData.ModelState.IsValid)
    {
        <div class="row">
            <div class="col-sm-12">
                <div class="alert alert-danger pl-2 pr-2 ml-2 mr-2 pb-0 pt-2">
                    <p class="p-0 m-0">
                        <h6><i class="icon fas fa-ban"></i> Alert!</h6>
                        @Html.ValidationSummary(true, "", new { style = "font-size: 10pt;" })
                    </p>
                </div>
            </div>
        </div>
    }
    <div class="row">
        <div class="col-sm-12">
            <div class="card card-info">
                <div class="card-header">
                    <h3 class="card-title">MATERIAL/LABOR AND SPECIFICATIONS</h3>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="card">
                                        <div class="card-header">
                                            @Html.HiddenFor(d => d.ID)
                                            @Html.HiddenFor(d => d.Material)
                                            <h4 class="card-title"><b>@Model.Material</b></h4>
                                        </div>
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col-sm-12">
                                                    <h6>MATERIAL DETAILS:</h6>
                                                    <div class="row">
                                                        <div class="col-sm-4"><b>Work Classification</b></div>
                                                        @Html.HiddenFor(modelItem => modelItem.Classification)
                                                        <div class="col-sm-1">:</div>
                                                        <div class="col-sm-7"><i>@Html.DisplayFor(modelItem => modelItem.Classification)</i></div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-sm-4"><b>Work Requirement</b></div>
                                                        @Html.HiddenFor(modelItem => modelItem.Requirement)
                                                        <div class="col-sm-1">:</div>
                                                        <div class="col-sm-7"><i>@Html.DisplayFor(modelItem => modelItem.Requirement)</i></div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-sm-4"><b>Unit of Measure</b></div>
                                                        @Html.HiddenFor(modelItem => modelItem.UOM)
                                                        <div class="col-sm-1">:</div>
                                                        <div class="col-sm-7"><i>@Html.DisplayFor(modelItem => modelItem.UOM)</i></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="card-title"><b>SPECIFICATIONS</b></h5>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-sm-12">
                                            <div class="ml-3 mr-3">
                                                <p style="text-align:justify; font-size:9pt;">@Html.DisplayFor(modelItem => modelItem.MaterialSpecification)</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <div class="card card-info">
                <div class="card-header">
                    <h3 class="card-title">Quantity Requirement and Material/Labor Costing</h3>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-lg-6 col-md-6 col-sm-12">
                            <div class="row">
                                <div class="col-sm-4">
                                    <div class="row mt-2">
                                        <div class="col-sm-12">
                                            <h6 style="color:black;"><b>Item Cost:</b></h6>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-8">
                                    @Html.EditorFor(m => m.ItemUnitCost, new { htmlAttributes = new { @class = "form-control form-control-sm", style = "font-size: 100%; text-align: right;", type = "number", min = "0.00", step = 0.01 } })
                                    @Html.ValidationMessageFor(model => model.ItemUnitCost, "", new { @class = "text-danger" })
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-4">
                                    <div class="row mt-2">
                                        <div class="col-sm-12">
                                            <h6 style="color:black;"><b>Labor Cost:</b></h6>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-8">
                                    @Html.EditorFor(m => m.LaborUnitCost, new { htmlAttributes = new { @class = "form-control form-control-sm", style = "font-size: 100%; text-align: right;", type = "number", min = "0.00", step = 0.01 } })
                                    @Html.ValidationMessageFor(model => model.LaborUnitCost, "", new { @class = "text-danger" })
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6 col-sm-12">
                            <div class="row">
                                <div class="col-sm-7">
                                    <div class="row mt-2">
                                        <div class="col-sm-12">
                                            <h6 style="color:black;"><b>Quantity Requirement:</b></h6>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-5">
                                    @Html.EditorFor(m => m.Quantity, new { htmlAttributes = new { @class = "form-control form-control-sm", style = "font-size: 100%; text-align: right;", type = "number" } })
                                    @Html.ValidationMessageFor(model => model.Quantity, "", new { @class = "text-danger" })
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
}

@section FormFooter{
    <div class="row">
        <div class="col-sm-12">
            <div style="text-align: right;">
                <button type="button" class="btn btn-md btn-success" onclick="AddToBasket()"> <i class="fa fa-plus"></i> Add to Estimates</button>
                <button type="button" class="btn btn-md btn-danger" onclick="window.location = '@Url.Action("view-catalogue", "MaterialsCatalogue", new { Area = "infrastructure-unit" })'"> <i class="fa fa-arrow-circle-left"></i> Back to Materials/Labor Catalogue</button>
            </div>
        </div>
    </div>
}

<script type="text/javascript">
    function AddToBasket() {
        $("#basket").submit();
    }
</script>