@model PUPFMIS.Models.ProjectPlanVM

@{
    ViewBag.Title = "Project Planning";
    ViewBag.Description = "Project Items";
    Layout = "~/Views/Shared/_BodyLayout.cshtml";
}

@section BreadCrumb {
    <ol class="breadcrumb float-sm-right">
        <li class="breadcrumb-item"><a href="/"><i class="fa fa-dashboard"></i>@Html.ActionLink("PUP-FM Portal", "index", "Home")</a></li>
        <li class="breadcrumb-item">@Html.ActionLink("Dashboard", "dashboard", "ProjectPlans", new { area = "end-users" }, null)</li>
        <li class="breadcrumb-item">Project Items</li>
    </ol>
}

@section Header {
    <div class="col-md-12 text-right">
        <h1 class="card-title"><i class="fa fa-bookmark"></i> Project Plan</h1>
    </div>
}

<div class="row">
    <div class="col-sm-12">
        <div class="card card-info">
            <div class="card-header">
                <h3 class="card-title">Project Information</h3>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-lg-6 col-md-6 col-sm-12">
                        <div class="form-group">
                            @Html.LabelFor(model => model.PAPCode, htmlAttributes: new { @class = "control-label" })
                            @Html.EditorFor(model => model.PAPCode, new { htmlAttributes = new { @class = "form-control form-control-sm", style = "font-size: 100%", disabled = "disabled" } })
                            @Html.ValidationMessageFor(model => model.PAPCode, "", new { @class = "text-danger" })
                        </div>
                    </div>
                    <div class="col-lg-6 col-md-6 col-sm-12">
                        <div class="form-group">
                            @Html.LabelFor(model => model.Program, htmlAttributes: new { @class = "control-label" })
                            @Html.EditorFor(model => model.Program, new { htmlAttributes = new { @class = "form-control form-control-sm", style = "font-size: 100%", disabled = "disabled" } })
                            @Html.ValidationMessageFor(model => model.Program, "", new { @class = "text-danger" })
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-6 col-md-6 col-sm-12">
                        <div class="form-group">
                            @Html.LabelFor(model => model.ProjectCode, htmlAttributes: new { @class = "control-label" })
                            @Html.EditorFor(model => model.ProjectCode, new { htmlAttributes = new { @class = "form-control form-control-sm", style = "font-size: 100%", disabled = "disabled" } })
                            @Html.ValidationMessageFor(model => model.ProjectCode, "", new { @class = "text-danger" })
                        </div>
                    </div>
                    <div class="col-lg-6 col-md-6 col-sm-12">
                        <div class="form-group">
                            @Html.LabelFor(model => model.ProjectName, htmlAttributes: new { @class = "control-label" })
                            @Html.EditorFor(model => model.ProjectName, new { htmlAttributes = new { @class = "form-control form-control-sm", style = "font-size: 100%", disabled = "disabled" } })
                            @Html.ValidationMessageFor(model => model.ProjectName, "", new { @class = "text-danger" })
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12">
                        <div class="form-group">
                            @Html.LabelFor(model => model.Description, htmlAttributes: new { @class = "control-label" })
                            @Html.EditorFor(model => model.Description, new { htmlAttributes = new { @class = "form-control form-control-sm", style = "font-size: 100%", disabled = "disabled" } })
                            @Html.ValidationMessageFor(model => model.Description, "", new { @class = "text-danger" })
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-6 col-md-6 col-sm-12">
                        <div class="form-group">
                            @Html.LabelFor(model => model.Unit, htmlAttributes: new { @class = "control-label" })
                            @Html.EditorFor(model => model.Unit, new { htmlAttributes = new { @class = "form-control form-control-sm", style = "font-size: 100%", disabled = "disabled" } })
                            @Html.ValidationMessageFor(model => model.Unit, "", new { @class = "text-danger" })
                        </div>
                    </div>
                    <div class="col-lg-6 col-md-6 col-sm-12">
                        <div class="form-group">
                            @Html.LabelFor(model => model.ProjectStatus, htmlAttributes: new { @class = "control-label" })
                            @Html.EditorFor(model => model.ProjectStatus, new { htmlAttributes = new { @class = "form-control form-control-sm", style = "font-size: 100%", disabled = "disabled" } })
                            @Html.ValidationMessageFor(model => model.ProjectStatus, "", new { @class = "text-danger" })
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-6 col-md-6 col-sm-12">
                        <div class="form-group">
                            @Html.LabelFor(model => model.FiscalYear, htmlAttributes: new { @class = "control-label" })
                            @Html.EditorFor(model => model.FiscalYear, new { htmlAttributes = new { @class = "form-control form-control-sm", style = "font-size: 100%", disabled = "disabled" } })
                            @Html.ValidationMessageFor(model => model.FiscalYear, "", new { @class = "text-danger" })
                        </div>
                    </div>
                    <div class="col-lg-6 col-md-6 col-sm-12">
                        <div class="form-group">
                            @Html.LabelFor(model => model.DeliveryMonth, htmlAttributes: new { @class = "control-label" })
                            @Html.EditorFor(model => model.DeliveryMonth, new { htmlAttributes = new { @class = "form-control form-control-sm", style = "font-size: 100%", disabled = "disabled" } })
                            @Html.ValidationMessageFor(model => model.DeliveryMonth, "", new { @class = "text-danger" })
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-sm-12">
        <div class="card card-info">
            <div class="card-header">
                <h3 class="card-title">Project Line Items</h3>
            </div>
            <div class="card-body">
                <div class="card card-primary card-outline">
                    <div class="card-header d-flex p-0">
                        <ul class="nav nav-pills p-2">
                            @if (Model.ProjectCode.Substring(0, 4) == "CSPR")
                            {
                                <li class="nav-item" style="font-size:12pt;"><a class="nav-link active" href="#projectItems" data-toggle="tab"><i class="fa fa-list"></i>&nbsp; Actual Obligations (Tier 1)</a></li>
                            }
                            <li class="nav-item" style="font-size:12pt;"><a class="@(Model.ProjectCode.Contains("EUPR") ? "nav-link active" : "nav-link")" href="#projectInformation" data-toggle="tab"><i class="fa fa-list"></i>&nbsp; New Spending Proposal (Tier 2)</a></li>
                        </ul>
                    </div>
                    <div class="tab-content">
                        @if (Model.ProjectCode.Substring(0, 4) == "CSPR")
                        {
                            <div class="tab-pane active" id="projectItems">
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-sm-12">
                                            <div class="card-body table-responsive p-sm-0">
                                                <table class="table table-striped table-hover" id="items">
                                                    <thead>
                                                        <tr>
                                                            <th width="60%" style="text-align:center; vertical-align:middle">Item and Specifications</th>
                                                            <th width="20%" style="text-align:center; vertical-align:middle">Quantity Requirement</th>
                                                            <th width="20%" style="text-align:center; vertical-align:middle">Estimated Budget</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        @foreach (var item in Model.ProjectPlanItems.Where(d => d.ProposalType == PUPFMIS.Models.BudgetProposalType.Actual).ToList())
                                                        {
                                                            <tr>
                                                                <td style="text-align:justify; vertical-align: middle;">
                                                                    <div class="row">
                                                                        <div class="col-sm-12">
                                                                            <span style="font-size:10pt"><b>@Html.DisplayFor(modelItem => item.ItemName) (<small style="font-size:8pt;"><b>@Html.DisplayFor(modelItem => item.ItemCode)</b></small>)</b></span>
                                                                        </div>
                                                                    </div>
                                                                    <br />
                                                                    <div class="row">
                                                                        <div class="col-sm-12">
                                                                            <b>ITEM SPECIFICATIONS:</b>
                                                                            <br />
                                                                            <p style="text-align:justify; font-style:italic; font-size:9pt; white-space:pre-wrap">@Html.DisplayFor(modelItem => item.ItemSpecifications)</p>
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-sm-12" style="font-size:8pt;">
                                                                            <div class="row">
                                                                                <div class="col-sm-4"><b>Item Type</b></div>
                                                                                <div class="col-sm-8">: &nbsp; <i>@Html.DisplayFor(modelItem => item.ItemType)</i></div>
                                                                            </div>
                                                                            <div class="row">
                                                                                <div class="col-sm-4"><b>Category</b></div>
                                                                                <div class="col-sm-8">: &nbsp; <i>@Html.DisplayFor(modelItem => item.Category)</i></div>
                                                                            </div>
                                                                            <div class="row">
                                                                                <div class="col-sm-4"><b>Unit Price</b></div>
                                                                                <div class="col-sm-8">: &nbsp; <i>@( item.UnitCost == null ? (item.ProjectItemStatus == "For Evaluation" ? item.ProjectItemStatus + " of " + item.ResponsibilityCenter : "Not Applicable") : ((decimal)item.UnitCost).ToString("C", new System.Globalization.CultureInfo("en-ph")) )</i></div>
                                                                            </div>
                                                                            <div class="row">
                                                                                <div class="col-sm-4"><b>Procurement Source</b></div>
                                                                                <div class="col-sm-8">: &nbsp; <i>@Html.DisplayFor(modelItem => item.ProcurementSource)</i></div>
                                                                            </div>
                                                                            <div class="row">
                                                                                <div class="col-sm-4"><b>Unit of Measure</b></div>
                                                                                <div class="col-sm-8">: &nbsp; <i>@Html.DisplayFor(modelItem => item.IndividualUOMReference)</i></div>
                                                                            </div>
                                                                            <div class="row">
                                                                                <div class="col-sm-4"><b>Minimum Issuance Qty</b></div>
                                                                                <div class="col-sm-8">: &nbsp; <i>@Html.DisplayFor(modelItem => item.MinimumIssuanceQty)<span>&nbsp;</span>@Html.DisplayFor(modelItem => item.IndividualUOMReference)</i></div>
                                                                            </div>
                                                                            <div class="row">
                                                                                <div class="col-sm-4"><b>Responsibility Center</b></div>
                                                                                <div class="col-sm-8">: &nbsp; <i>@Html.DisplayFor(modelItem => item.ResponsibilityCenter)</i></div>
                                                                            </div>
                                                                            <div class="row">
                                                                                <div class="col-sm-4"><b>Purchase Request Center</b></div>
                                                                                <div class="col-sm-8">: &nbsp; <i>@Html.DisplayFor(modelItem => item.PurchaseRequestCenter)</i></div>
                                                                            </div>
                                                                            <div class="row">
                                                                                <div class="col-sm-4"><b>Project Item Status</b></div>
                                                                                <div class="col-sm-8">: &nbsp; <i>@Html.DisplayFor(modelItem => item.ProjectItemStatus)</i></div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <br />
                                                                    <div class="row">
                                                                        <div class="col-sm-12">
                                                                            <p style="font-size:9pt;">
                                                                                <b>Justification:</b>
                                                                                <br />
                                                                                <span style="text-align:justify">@Html.DisplayFor(modelItem => item.Justification)</span>
                                                                            </p>
                                                                        </div>
                                                                    </div>
                                                                </td>
                                                                <td style="text-align:left; vertical-align:top;" width="15%">
                                                                    @if (item.JanQty != 0)
                                                                    {
                                                                        <div class="row">
                                                                            <div class="col-sm-6">
                                                                                @Html.DisplayNameFor(modelItem => item.JanQty):
                                                                            </div>
                                                                            <div class="col-sm-6">
                                                                                @Html.DisplayFor(modelItem => item.JanQty)
                                                                            </div>
                                                                        </div>
                                                                    }
                                                                    @if (item.FebQty != 0)
                                                                    {
                                                                        <div class="row">
                                                                            <div class="col-sm-6">
                                                                                @Html.DisplayNameFor(modelItem => item.FebQty):
                                                                            </div>
                                                                            <div class="col-sm-6">
                                                                                @Html.DisplayFor(modelItem => item.FebQty)
                                                                            </div>
                                                                        </div>
                                                                    }
                                                                    @if (item.MarQty != 0)
                                                                    {
                                                                        <div class="row">
                                                                            <div class="col-sm-6">
                                                                                @Html.DisplayNameFor(modelItem => item.MarQty):
                                                                            </div>
                                                                            <div class="col-sm-6">
                                                                                @Html.DisplayFor(modelItem => item.MarQty)
                                                                            </div>
                                                                        </div>
                                                                    }
                                                                    @if (item.AprQty != 0)
                                                                    {
                                                                        <div class="row">
                                                                            <div class="col-sm-6">
                                                                                @Html.DisplayNameFor(modelItem => item.AprQty):
                                                                            </div>
                                                                            <div class="col-sm-6">
                                                                                @Html.DisplayFor(modelItem => item.AprQty)
                                                                            </div>
                                                                        </div>
                                                                    }
                                                                    @if (item.MayQty != 0)
                                                                    {
                                                                        <div class="row">
                                                                            <div class="col-sm-6">
                                                                                @Html.DisplayNameFor(modelItem => item.MayQty):
                                                                            </div>
                                                                            <div class="col-sm-6">
                                                                                @Html.DisplayFor(modelItem => item.MayQty)
                                                                            </div>
                                                                        </div>
                                                                    }
                                                                    @if (item.JunQty != 0)
                                                                    {
                                                                        <div class="row">
                                                                            <div class="col-sm-6">
                                                                                @Html.DisplayNameFor(modelItem => item.JunQty):
                                                                            </div>
                                                                            <div class="col-sm-6">
                                                                                @Html.DisplayFor(modelItem => item.JunQty)
                                                                            </div>
                                                                        </div>
                                                                    }
                                                                    @if (item.JulQty != 0)
                                                                    {
                                                                        <div class="row">
                                                                            <div class="col-sm-6">
                                                                                @Html.DisplayNameFor(modelItem => item.JulQty):
                                                                            </div>
                                                                            <div class="col-sm-6">
                                                                                @Html.DisplayFor(modelItem => item.JulQty)
                                                                            </div>
                                                                        </div>
                                                                    }
                                                                    @if (item.AugQty != 0)
                                                                    {
                                                                        <div class="row">
                                                                            <div class="col-sm-6">
                                                                                @Html.DisplayNameFor(modelItem => item.AugQty):
                                                                            </div>
                                                                            <div class="col-sm-6">
                                                                                @Html.DisplayFor(modelItem => item.AugQty)
                                                                            </div>
                                                                        </div>
                                                                    }
                                                                    @if (item.SepQty != 0)
                                                                    {
                                                                        <div class="row">
                                                                            <div class="col-sm-6">
                                                                                @Html.DisplayNameFor(modelItem => item.SepQty):
                                                                            </div>
                                                                            <div class="col-sm-6">
                                                                                @Html.DisplayFor(modelItem => item.SepQty)
                                                                            </div>
                                                                        </div>
                                                                    }
                                                                    @if (item.OctQty != 0)
                                                                    {
                                                                        <div class="row">
                                                                            <div class="col-sm-6">
                                                                                @Html.DisplayNameFor(modelItem => item.OctQty):
                                                                            </div>
                                                                            <div class="col-sm-6">
                                                                                @Html.DisplayFor(modelItem => item.OctQty)
                                                                            </div>
                                                                        </div>
                                                                    }
                                                                    @if (item.NovQty != 0)
                                                                    {
                                                                        <div class="row">
                                                                            <div class="col-sm-6">
                                                                                @Html.DisplayNameFor(modelItem => item.NovQty):
                                                                            </div>
                                                                            <div class="col-sm-6">
                                                                                @Html.DisplayFor(modelItem => item.NovQty)
                                                                            </div>
                                                                        </div>
                                                                    }
                                                                    @if (item.DecQty != 0)
                                                                    {
                                                                        <div class="row">
                                                                            <div class="col-sm-6">
                                                                                @Html.DisplayNameFor(modelItem => item.DecQty):
                                                                            </div>
                                                                            <div class="col-sm-6">
                                                                                @Html.DisplayFor(modelItem => item.DecQty)
                                                                            </div>
                                                                        </div>
                                                                    }
                                                                    <div class="row">
                                                                        <div class="col-sm-6">
                                                                            <b>TOTAL:</b>
                                                                        </div>
                                                                        <div class="col-sm-6">
                                                                            <b>@Html.DisplayFor(modelItem => item.TotalQty)</b>
                                                                        </div>
                                                                    </div>
                                                                </td>
                                                                <td style="text-align:right; vertical-align:top;">
                                                                    @( String.Format("{0:C}", item.EstimatedBudget) )
                                                                </td>
                                                            </tr>
                                                        }
                                                    </tbody>
                                                    <tfoot>
                                                        <tr>
                                                            <td colspan="2" align="right"><h6>Total Estimated Budget (Tier 1):</h6></td>
                                                            <td align="right"><h6>@( ((decimal)Model.ProjectPlanItems.Where(d => d.ProposalType == PUPFMIS.Models.BudgetProposalType.Actual).Sum(d => d.EstimatedBudget)).ToString("C", new System.Globalization.CultureInfo("en-ph")) )</h6></td>
                                                        </tr>
                                                    </tfoot>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                        <div class="@(Model.ProjectCode.Contains("EUPR") ? "tab-pane active" : "tab-pane")" id="projectInformation">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-sm-12">
                                    @if (Model.ProjectStatus == "New Project")
                                    {
                                        <div class="row">
                                            <div class="col-sm-12">
                                                <div class="float-right">
                                                    <button type="button" class="btn btn-md btn-warning" onclick="window.location = '@Url.Action("view-catalogue", "Catalogue", new { ProjectCode = Model.ProjectCode })'"><i class="fa fa-plus"></i>&nbsp; Add Items</button>
                                                </div>
                                            </div>
                                        </div>
                                            <hr />
                                    }
                                    <table class="table table-striped table-hover" id="newItems">
                                        <thead>
                                            <tr>
                                                <th width="30%" style="text-align:center; vertical-align:middle">Item Name</th>
                                                <th width="15%" style="text-align:center; vertical-align:middle">Status</th>
                                                <th width="15%" style="text-align:center; vertical-align:middle">Total Qty. for the Year</th>
                                                <th width="15%" style="text-align:center; vertical-align:middle">Estimated Budget</th>
                                                <th width="25%" style="text-align:center; vertical-align:middle">Action</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @foreach (var item in Model.ProjectPlanItems.Where(d => d.ProposalType == PUPFMIS.Models.BudgetProposalType.NewProposal).ToList())
                                            {
                                                <tr>
                                                    <td style="text-align:left; vertical-align: middle;">
                                                        <b>@Html.DisplayFor(modelItem => item.ItemName) (<small style="font-size:8pt;"><b>@Html.DisplayFor(modelItem => item.ItemCode)</b></small>)</b>
                                                    </td>
                                                    <td style="text-align:center; vertical-align:middle;">
                                                        @if ((item.ProjectItemStatus == "For Evaluation"))
                                                        {
                                                            <span class="badge bg-primary p-1" style="font-size:100%;">@Html.DisplayFor(modelItem => item.ProjectItemStatus)</span>
                                                        }
                                                        else if (item.ProjectItemStatus == "For Revision")
                                                        {
                                                            <span class="badge bg-warning p-1" style="font-size:100%;">@Html.DisplayFor(modelItem => item.ProjectItemStatus)</span>
                                                        }
                                                        else if (item.ProjectItemStatus == "Item Not Accepted" || item.ProjectItemStatus == "Disapproved")
                                                        {
                                                            <span class="badge bg-danger p-1" style="font-size:100%;">@Html.DisplayFor(modelItem => item.ProjectItemStatus)</span>
                                                        }
                                                        else
                                                        {
                                                            <span class="badge bg-success p-1" style="font-size:100%;">@Html.DisplayFor(modelItem => item.ProjectItemStatus)</span>
                                                        }
                                                    </td>
                                                    <td style="text-align:center; vertical-align:middle;">
                                                        <b>@Html.DisplayFor(modelItem => item.TotalQty)</b>
                                                    </td>
                                                    @if ((item.EstimatedBudget == null) && (item.ProcurementSource == "External Suppliers"))
                                                    {
                                                        <td style="text-align:center; vertical-align:middle;">
                                                            <span class="badge bg-danger p-1" style="font-size:100%;">@( "Market Survey to be updated by " + item.ResponsibilityCenter )</span>
                                                        </td>
                                                    }
                                                    else
                                                    {
                                                        <td style="text-align:right; vertical-align:middle;">
                                                            <b>@( item.EstimatedBudget == null ? string.Empty : item.EstimatedBudget.Value.ToString("C", new System.Globalization.CultureInfo("en-ph")) )</b>
                                                        </td>
                                                    }
                                                    <td style="text-align: center; vertical-align: middle;">
                                                        <button type="button" class="btn btn-sm btn-primary" onclick="window.location = '@Url.Action("project-item-details", "ProjectPlans", new { Area = "end-users", ProjectCode = Model.ProjectCode, ItemCode = item.ItemCode })'"><i class="fa fa-eye"></i> View Details</button>
                                                    </td>
                                                </tr>
                                            }
                                        </tbody>
                                        <tfoot>
                                            <tr>
                                                <td colspan="3" align="right" valign="middle"><h6>Total Estimated Budget (Tier 2):</h6></td>
                                                <td align="right"><h6>@( ((decimal)Model.ProjectPlanItems.Where(d => d.ProposalType == PUPFMIS.Models.BudgetProposalType.NewProposal).Sum(d => d.EstimatedBudget)).ToString("C", new System.Globalization.CultureInfo("en-ph")) )</h6></td>
                                                <td></td>
                                            </tr>
                                        </tfoot>
                                    </table>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer">
                        <div class="row">
                            <div class="col-sm-1"></div>
                            <div class="col-sm-10">
                                <div class="float-right">
                                    <h4>Total Estimated Budget: @( ((decimal)Model.ProjectPlanItems.Sum(d => d.EstimatedBudget)).ToString("C", new System.Globalization.CultureInfo("en-ph")) )</h4>
                                </div>
                            </div>
                            <div class="col-sm-1"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section FormFooter{
    @using (Ajax.BeginForm("submit-project", "ProjectPlans", new AjaxOptions() { HttpMethod = "POST", OnSuccess = "CreateResult" }, htmlAttributes: new { id = "addItem", Area = "end-users" }))
    {
        <div class="row">
            <div class="col-sm-12">
                <div style="text-align: right;">
                    @if (Model.ProjectStatus == PUPFMIS.Models.ProjectStatus.NewProject.GetAttribute<System.ComponentModel.DataAnnotations.DisplayAttribute>().Name && Model.ProjectPlanItems.Count > 0)
                    {
                        <a class="btn btn-md btn-primary" href="@Url.Action("print-description", "ProjectPlans", new { Area = "end-users", ProjectCode = Model.ProjectCode })" target="_blank"><i class="fa fa-print"></i> Print Project Description</a>
                        <button type="button" class="btn btn-md btn-primary" onclick='SubmitProject()'><i class="fa fa-plus-circle"></i> Forward to Responsibility Center</button>
                    }
                    <button type="button" class="btn btn-md btn-danger" onclick='window.location = "@Url.Action("list", "ProjectPlans", new { Area = "end-users", FiscalYear = Model.FiscalYear })"'><i class="fa fa-arrow-circle-left"></i> Back to Projects List</button>
                </div>
            </div>
        </div>
    }
}

<script type="text/javascript">
    $(function () {
        $('#items').DataTable({
            "paging": true,
            "lengthChange": true,
            "searching": true,
            "ordering": false,
            "info": true,
            "autoWidth": false,
        });
    });
    $(function () {
        $('#newItems').DataTable({
            "paging": true,
            "lengthChange": true,
            "searching": true,
            "ordering": false,
            "info": true,
            "autoWidth": false,
        });
    });
    function SubmitProject() {
        swal.fire({
            title: "Submit Project Plan?",
            text: "You are about to submit this Project Plan, continue?",
            icon: "question",
            showCancelButton: true,
        }).then((result) => {
            if (result.value) {
                $("#addItem").submit();
            }
            else {
                swal.fire({
                    title: "Cancelled!",
                    text: "You have cancelled saving the record.",
                    icon: "error"
                })
            };
        })
    }
    function CreateResult(data) {
        if (data.result == true) {
            swal.fire({
                title: "Record Saved!",
                text: "Project Plan is forwarded to Responsibility Center.",
                icon: "success"
            }).then((result) => {
                if (result.value) {
                    window.location.href = "@Url.Action("list", "ProjectPlans", new { Area = "end-users", FiscalYear = Model.FiscalYear })";
                }
            })
        }
        else {
            swal.fire({
                title: "Record Not Saved!",
                text: "Saving record failed.",
                icon: "error"
            });
        }
    }
    function RemoveItem(itemCode) {
        var ItemCode = itemCode;
        var url = '@Url.Action("remove-item", "ProjectPlans", new { Area = "end-users", ItemCode = "xxxx-xx", ProjectCode = Model.ProjectCode })';
        url = url.replace("xxxx-xx", itemCode);
        swal.fire({
            title: "Remove item from Project?",
            html: '<p style=font-size:12pt;">You are about to <b>permanently remove</b> this item from the Project, continue?</p>',
            icon: "question",
            showCancelButton: true
        }).then((result) => {
            if (result.value) {
                $.ajax({
                    type: "GET",
                    url: url,
                    success: function (data) {
                        if (data.result == true) {
                            swal.fire({
                                title: "Item Removed!",
                                text: "Item is removed from the Project.",
                                icon: "success"
                            }).then((result) => {
                                var url = '@Url.Action("project-details", "ProjectPlans", new { Area = "end-users", ProjectCode = Model.ProjectCode })';
                                window.location = url;
                            })
                        }
                    }
                });
            }
            else {
                swal.fire({
                    title: "Cancelled!",
                    text: "You have cancelled saving the record.",
                    icon: "error"
                })
            };
        })
    }
</script>