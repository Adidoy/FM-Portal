@model PUPFMIS.Models.ProjectPlanningDashboardVM

@{
    ViewBag.Title = "Project Plans";
    ViewBag.Description = "Home";
    Layout = "~/Views/Shared/_IndexLayout.cshtml";
}

@section BreadCrumb {
    <ol class="breadcrumb float-sm-right">
        <li class="breadcrumb-item"><a href="/"><i class="fa fa-tachometer-alt"></i>&nbsp;@Html.ActionLink("PUP-FM Portal", "index", "Home", new { Area = "" }, null)</a></li>
        <li class="breadcrumb-item">Project Plans</li>
        <li class="breadcrumb-item">Home</li>
    </ol>
}

@section Header {
    <h3 class="card-title"><i class="fa fa-home"></i> Project Plans Home</h3>
}

<div class="row">
    <div class="col-sm-12 pl-0 pr-0 ml-0 mr-0">
        <div class="card card-primary card-outline">
            <div class="card-header d-flex p-0">
                <ul class="nav nav-pills p-2">
                    <li class="nav-item" style="font-size:12pt;"><a class="nav-link active" href="#dashboard" data-toggle="tab"><i class="fa fa-tachometer-alt"></i>&nbsp; Dashboard</a></li>
                    <li class="nav-item" style="font-size:12pt;"><a class="nav-link" href="#switchBoard" data-toggle="tab"><i class="fa fa-envelope"></i>&nbsp; Switchboard</a></li>
                </ul>
            </div>
            <div class="tab-content">
                <div class="tab-pane active" id="dashboard">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-sm-12">
                                <h3>Dashboard</h3>
                            </div>
                        </div>
                        <hr />
                        <div class="card card-info">
                            <div class="card-header"><h3 class="card-title">Statistics</h3></div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-lg-4 col-md-4 col-sm-12">
                                        <div class="small-box bg-primary">
                                            <div class="inner">
                                                <h3>@Model.TotalNumberOfProjects</h3>
                                                <p>Total Projects Created</p>
                                            </div>
                                            <div class="icon">
                                                <i class="fa fa-file"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-4 col-md-4 col-sm-12">
                                        <div class="small-box bg-danger">
                                            <div class="inner">
                                                <h3>@Model.TotalProjectsForwardedResponsibilityCenter</h3>
                                                <p>Forwarded to Responsibility Centers</p>
                                            </div>
                                            <div class="icon">
                                                <i class="fa fa-file-export"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-4 col-md-4 col-sm-12">
                                        <div class="small-box bg-warning">
                                            <div class="inner">
                                                <h3>@Model.TotalProjectsEvaluatedResponsibilityCenter</h3>
                                                <p>Evaluated by Responsibility Centers</p>
                                            </div>
                                            <div class="icon">
                                                <i class="fa fa-share"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-6 col-md-6 col-sm-12">
                                <div class="card card-info">
                                    <div class="card-header"><h3 class="card-title">View Projects</h3></div>
                                    <div class="card-body">
                                        <table class="table table-hover table-striped" id="projectList">
                                            <thead>
                                                <tr>
                                                    <th style="text-align:center; vertical-align:middle" width="30%">Fiscal Year</th>
                                                    <th style="text-align:center; vertical-align:middle" width="70%">Action</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @foreach (var item in Model.ProjectFiscalYears)
                                                {
                                                    <tr>
                                                        <td style="text-align:center; vertical-align:middle">@Html.DisplayFor(modelItem => item)</td>
                                                        <td style="text-align:center; vertical-align:middle"><button class="btn btn-primary btn-sm" onclick="window.location = '@Url.Action("list", "ProjectPlans", new { Area = "end-users", FiscalYear = item })'"><i class="fa fa-eye"></i> View Projects</button></td>
                                                    </tr>
                                                }
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                @*<div class="card card-info">
                                    <div class="card-header"><h3 class="card-title">View Infrastructure Plan Requests</h3></div>
                                    <div class="card-body">
                                        <table class="table table-hover table-striped" id="infraRequestList">
                                            <thead>
                                                <tr>
                                                    <th style="text-align:center; vertical-align:middle" width="30%">Fiscal Year</th>
                                                    <th style="text-align:center; vertical-align:middle" width="70%">Action</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @foreach (var item in Model.ProjectInfraFiscalYears)
                                                {
                                                    <tr>
                                                        <td style="text-align:center; vertical-align:middle">@Html.DisplayFor(modelItem => item)</td>
                                                        <td style="text-align:center; vertical-align:middle"><button class="btn btn-primary btn-sm" onclick="window.location = '@Url.Action("infra-list", "ProjectPlans", new { Area = "end-users", FiscalYear = item })'"><i class="fa fa-eye"></i> View Requests</button></td>
                                                    </tr>
                                                }
                                            </tbody>
                                        </table>
                                    </div>
                                </div>*@
                                <div class="card card-info">
                                    <div class="card-header"><h3 class="card-title">Project Plan Progress</h3></div>
                                    <div class="card-body">
                                        <div class="progress-group">
                                            Projects Forwarded to Responsibility Center
                                            <span class="float-right"><b>@Model.TotalProjectsForwardedResponsibilityCenter</b>/@Model.TotalNumberOfProjects (@Model.PercentageOfPosting)</span>
                                            <div class="progress progress-sm">
                                                <div class="progress-bar bg-primary" style="width: @Model.PercentageOfPosting"></div>
                                            </div>
                                        </div>
                                        <div class="progress-group">
                                            Projects Evaluated by Responsibility Center
                                            <span class="float-right"><b>@Model.TotalProjectsEvaluatedResponsibilityCenter</b>/@Model.TotalNumberOfProjects (@Model.PercentageOfSubmission)</span>
                                            <div class="progress progress-sm">
                                                <div class="progress-bar bg-danger" style="width: @Model.PercentageOfSubmission"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-6 col-sm-12">
                                <div class="card card-info">
                                    <div class="card-header"><h3 class="card-title">Project Plan Actions</h3></div>
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-sm-12">
                                                <div class="info-box">
                                                    <span class="info-box-icon bg-primary"><i class="fa fa-plus"></i></span>
                                                    <div class="info-box-content">
                                                        <span class="info-box-text" style="font-size:10pt; font-weight:bold;"> @Html.ActionLink("Create Common Supplies Plan", "create-common-supplies", "ProjectPlans", new { area = "end-users" }, null)</span>
                                                        <span class="info-box-number" style="font-size:8pt;">
                                                            Create plan for your Office's common-use supplies.
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-12">
                                                <div class="info-box">
                                                    <span class="info-box-icon bg-warning"><i class="fa fa-plus"></i></span>
                                                    <div class="info-box-content">
                                                        <span class="info-box-text" style="font-size:10pt; font-weight:bold;"> @Html.ActionLink("Create Project Plan", "create-project-plan", "ProjectPlans", new { area = "end-users" }, null)</span>
                                                        <span class="info-box-number" style="font-size:8pt;">
                                                            Create procurement plan for your Office's programs/activities/projects.
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane" id="switchBoard">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-sm-12">
                                <h3>Switchboard</h3>
                            </div>
                        </div>
                        <hr />
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="card-body table-responsive p-sm-0">
                                    <table class="table table-striped table-hover" id="switchBoardList">
                                        <thead>
                                            <tr>
                                                <th style="text-align:center; vertical-align:middle;" width="20%">@Html.DisplayNameFor(d => d.Switchboard.FirstOrDefault().MessageType)</th>
                                                <th style="text-align:center; vertical-align:middle;" width="20%">@Html.DisplayNameFor(d => d.Switchboard.FirstOrDefault().Reference)</th>
                                                <th style="text-align:center; vertical-align:middle;" width="40%">@Html.DisplayNameFor(d => d.Switchboard.FirstOrDefault().Subject)</th>
                                                <th style="text-align:center; vertical-align:middle;" width="20%">@Html.DisplayNameFor(d => d.Switchboard.FirstOrDefault().UpdatedAt)</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @foreach (var item in Model.Switchboard)
                                            {
                                                <tr>
                                                    <td style="text-align:left; vertical-align:middle"><b>@Html.DisplayFor(d => item.MessageType)</b></td>
                                                    <td style="text-align:left; vertical-align:middle">
                                                        <b>@Html.ActionLink(item.Reference, "view-switchboard-details", "Dashboard", new { Area = "end-users", ReferenceNo = item.Reference }, null)</b>
                                                    </td>
                                                    <td style="text-align:justify; vertical-align:middle">@Html.DisplayFor(d => item.Subject)</td>
                                                    <td style="text-align:left; vertical-align:middle">@Html.DisplayFor(d => item.UpdatedAt)</td>
                                                </tr>
                                            }
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
        $(function () {
            $('#projectList').DataTable({
                "paging": false,
                "pageLength": 3,
                "lengthChange": false,
                "searching": false,
                "ordering": false,
                "info": false,
                "autoWidth": false,
            });
        });
        $(function () {
            $('#infraRequestList').DataTable({
                "paging": false,
                "pageLength": 3,
                "lengthChange": false,
                "searching": false,
                "ordering": false,
                "info": false,
                "autoWidth": false,
            });
        });
        $(function () {
            $('#ppmpList').DataTable({
                "paging": false,
                "pageLength": 3,
                "lengthChange": false,
                "searching": false,
                "ordering": false,
                "info": false,
                "autoWidth": false,
            });
        });
        $(function () {
            $('#switchBoardList').DataTable({
                "paging": true,
                "lengthChange": true,
                "searching": true,
                "ordering": false,
                "info": true,
                "autoWidth": true,
            });
        });
</script>